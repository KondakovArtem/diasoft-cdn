{"__common":["noCyrillycName","checkBoundingBox",{"type":"isContainedBy","parent":"main-grid"}],"__component_common":[{"type":"isContainedBy","parent":"main-grid"}],"__frame_common":["checkIsFrameAutoLayout"],"__frame_other":[{"type":"expression","source":"module.exports = (node, rule, utils) => {\r\n  if (node.parent.type === \"PAGE\") {\r\n    return;\r\n  }\r\n  const parentName = utils.normalizeName(node.parent.name);\r\n  if ([\"p-grid\", \"sidebar\", \"p-card\", 'p-tabview-panels'].includes(parentName)) {\r\n    \r\n    if (node.children.length > 1) {\r\n      utils.isHorizontalLayout(node);\r\n      utils.checkSpacing(node, {\r\n        type: \"checkSpacing\",\r\n        value: 16,\r\n      });\r\n    }\r\n    if (node.layoutMode === \"HORIZONTAL\") {\r\n      utils.checkPadding(node, {\r\n        value: [0],\r\n        description: `Геометрия дочерних для <b>${parentName}</b> горизонтальных фреймов не учитывается. \r\n          Для задания отступов необходимо добавить еще один фрейм внутрь этого горизонтального фрейма`,\r\n      });\r\n    }\r\n  }\r\n};\r\n"}],"__root":["excludeCommon",{"type":"containsChildren","names":["Main-grid","Tabs-menu","Menu"]}],"__text_common":["isTypographicLinked"],"button-group":["component"],"button":["component"],"buttons":["component"],"calendar-input":["component"],"card-header":["isHorizontalLayout",{"type":"containsChildren","names":["Left","Right"]},{"type":"checkPadding","bottom":"24"}],"card":[{"type":"isContainedBy","parent":"p-form"},"isVerticalLayout",{"type":"containsChildren","names":[{"name":"p-card","mincount":1},{"name":"card-header","maxcount":1}],"strict":false},{"type":"checkSpacing","value":[0,16]}],"dialog-container":[{"type":"isChildrenOf","parent":"main-grid"},"isVerticalLayout",{"type":"checkPadding","value":[0]},{"type":"checkSpacing","value":0},{"type":"containsChildren","strict":false,"names":[{"name":"dialog-header","maxcount":1},{"name":"dialog-footer","maxcount":1}]}],"dialog-content":["component",{"type":"isChildrenOf","parent":"dialog-container"},{"type":"checkPadding","left":[24],"right":[24],"top":[16],"bottom":[16]}],"dialog-footer":["component",{"type":"isChildrenOf","parent":"dialog-container"},{"type":"expression","source":"module.exports = (node, rule, utils) => {\r\n  const buttonsNode = utils.findNested(\"buttons\")[0];\r\n\r\n  if (buttonsNode) {\r\n    utils.checkSpacing(buttonsNode, {\r\n      value: 16,\r\n    });\r\n  }\r\n};\r\n"},{"type":"checkPadding","top":[16],"bottom":[16],"left":[24],"right":[24]}],"dialog-header":["component",{"type":"checkPadding","bottom":[16],"top":[16],"left":[24],"right":[24]}],"divider":["component"],"dropdown":["component"],"filter":["component",{"type":"isChildrenOf","parent":"table-filter-container"}],"grid-td":["component",{"type":"expression","source":"module.exports = (node, rule, utils) => {\r\n  const {ErrorTypes} = utils;\r\n  if (node.mainComponent) {\r\n    const props = utils.parseComponentProps(node.mainComponent.name);\r\n    if (props.Type === \"Checkbox\" && node.width !== 36) {\r\n      utils.createErrorObject(\r\n        node,\r\n        ErrorTypes.STRUCTURE,\r\n        `Для узла <b>grid-td</b> с <b>Type = 'Checkbox'</b>, ширина должна быть задана <b>36px</b>`\r\n      );\r\n    }\r\n  }\r\n};\r\n"}],"grid-th":["component",{"type":"expression","source":"module.exports = (node, rule, utils) => {\r\n    const {ErrorTypes} = utils;\r\n    if (node.mainComponent) {\r\n      const props = utils.parseComponentProps(node.mainComponent.name);\r\n      if (props.Type === \"Checkbox\" && node.width !== 36) {\r\n        utils.createErrorObject(\r\n          node,\r\n          ErrorTypes.STRUCTURE,\r\n          `Для узла <b>grid-th</b> с <b>Type = 'Checkbox'</b>, ширина должна быть задана <b>36px</b>`\r\n        );\r\n      }\r\n    }\r\n  };\r\n  "}],"grid":["isVerticalLayout",{"type":"containsChildren","names":[{"name":"p-datatable-tbody","mincount":1},{"name":"p-datatable-thead","maxcount":1}]}],"icons":["component"],"info":["component"],"input":["component"],"main-grid":[{"type":"expression","source":"module.exports = (node, rule, utils) => {\r\n  let error = false;\r\n  const { name } = node;\r\n  const { ErrorTypes } = utils;\r\n  if (!node.layoutGrids || node.layoutGrids.length !== 1) {\r\n    error = true;\r\n  } else {\r\n    const [layoutGrid] = node.layoutGrids;\r\n    if (\r\n      layoutGrid.alignment !== \"STRETCH\" ||\r\n      layoutGrid.count !== 12 ||\r\n      layoutGrid.gutterSize !== 16 ||\r\n      layoutGrid.pattern !== \"COLUMNS\"\r\n    ) {\r\n      error = true;\r\n    }\r\n  }\r\n  if (error) {\r\n    utils.createErrorObject(\r\n      node,\r\n      ErrorTypes.STRUCTURE,\r\n      `Для узла <b>${name}</b> должен быть задан <b>Layout grid</b> типа <b>Columns</b>, \r\n            <b>Count=12</b>, <b>Gutter=16</b>`\r\n    );\r\n  }\r\n};\r\n"},"isRootChildren","excludeCommon","noCyrillycName"],"menu":[{"type":"expression","source":"module.exports = (node, utils) => {\r\n    return {transclude: false}\r\n}"},"excludeCommon","noCyrillycName"],"overlay":["component","excludeCommon"],"p-card":["isVerticalLayout",{"type":"isChildrenOf","parent":"card"},{"type":"checkSpacing","value":16},{"type":"checkPadding","value":[0,4,8,16,24,32,48]},{"type":"expression","source":"module.exports = (node, rule, utils) => {\r\n    debugger;\r\n    let shadow = (node.effects || []).find(effect => effect.type === 'DROP_SHADOW');\r\n    let background = (node.backgrounds || []).find(item => item.type === 'SOLID');\r\n    const {name} = node;\r\n    const {_, ErrorTypes} = utils;\r\n\r\n    function rgbToHex(color) {\r\n        function componentToHex(c) {\r\n            c = c == undefined  ?  1 : c;\r\n            var hex = _.round((c * 255)).toString(16);\r\n            return hex.length == 1 ? \"0\" + hex : hex;\r\n        }\r\n        return (\"#\" + componentToHex(color.r) + componentToHex(color.g) + componentToHex(color.b) + componentToHex(color.a)).toUpperCase();\r\n    }\r\n\r\n    const shadowStyle = {\r\n        blendMode: \"NORMAL\",\r\n\t    color: '#CFD2ECB2',\r\n\t    offset: {\r\n\t\t    x: 0,\r\n\t\t    y: 9\r\n\t    },\r\n\t    radius: 54,\r\n\t    spread: 0,\r\n\t    type: \"DROP_SHADOW\",\r\n\t    visible: true,\r\n    }\r\n    const backgroundStyle = {\r\n        blendMode: \"NORMAL\",\r\n        color: '#FFFFFFFF',\r\n        opacity: 1,\r\n        type: \"SOLID\",\r\n        visible: true,\r\n    }\r\n    if (background) {\r\n        background = _.cloneDeep(background);\r\n        background.color = rgbToHex(background.color);\r\n    }\r\n\r\n    if (shadow){\r\n        shadow = _.cloneDeep(shadow);\r\n        shadow.color = rgbToHex(shadow.color);\r\n    }\r\n    \r\n    if (!node.effectStyleId && (!shadow || !_.isEqual(shadowStyle, shadow))){\r\n        utils.createErrorObject(\r\n            node,\r\n            ErrorTypes.STRUCTURE,\r\n            `Для узла <b>${name}</b> должен быть задан <b>\"Effects.Drop shadow\"</b> = <b>\r\n                    {x:0, y:9, blur: 54, spread: 0, color: CFD2EC (70%)}</b>`\r\n          ); \r\n    }\r\n    if (!node.backgroundStyleId && (!background || !_.isEqual(backgroundStyle, background)))  {\r\n        utils.createErrorObject(\r\n            node,\r\n            ErrorTypes.STRUCTURE,\r\n            `Для узла <b>${name}</b> должен быть задан  фон <b>#FFFFFF 100%</b>`\r\n          ); \r\n    }\r\n    if (node.cornerRadius !== 3) {\r\n        utils.createErrorObject(\r\n            node,\r\n            ErrorTypes.STRUCTURE,\r\n            `Для узла <b>${name}</b> должен быть задан  <b>Corner raduis = 3 </b>`\r\n          ); \r\n    }\r\n\r\n    \r\n\r\n};\r\n  "}],"p-datatable-tbody":[{"type":"isChildrenOf","parent":["grid","table"]},{"type":"expression","source":"module.exports = (node, rule, utils) => {\r\n  const parentName = utils.normalizeName(node.parent.name);\r\n  if (parentName === \"grid\") {\r\n    utils.containsChildren(node, {\r\n      type: \"containsChildren\",\r\n      names: [\r\n        { name: \"divider\", maxcount: 2 },\r\n        { name: \"tr-group\", mincount: 1 },\r\n        { name: \"tr-group-expanded\", maxcount: 1 },\r\n      ],\r\n    });\r\n  } else if (parentName === \"table\") {\r\n    utils.containsChildren(node, {\r\n      type: \"containsChildren\",\r\n      names: [\r\n        { name: \"divider\", maxcount: 1 },\r\n        { name: \"tr\", maxcount: 1 },\r\n        { name: \"tr-group\", maxcount: 1 },\r\n      ],\r\n    });\r\n  }\r\n};\r\n"},{"type":"checkPadding","value":[0]},"isVerticalLayout"],"p-datatable-thead":[{"type":"isChildrenOf","parent":["grid","table"]},{"type":"checkPadding","value":[0]},"isVerticalLayout",{"type":"expression","source":"module.exports = (node, rule, utils) => {\r\n  const parentName = utils.normalizeName(node.parent.name);\r\n  if (parentName === \"grid\") {\r\n    utils.containsChildren(node, {\r\n      type: \"containsChildren\",\r\n      names: [\r\n        { name: \"divider\", maxcount: 2 },\r\n        { name: \"tr-group\", mincount: 1 },\r\n        { name: \"tr-group-expanded\", maxcount: 1 },\r\n      ],\r\n    });\r\n  } else if (parentName === \"table\") {\r\n    utils.containsChildren(node, {\r\n      type: \"containsChildren\",\r\n      names: [\r\n        { name: \"divider\", maxcount: 1 },\r\n        { name: \"tr\", maxcount: 1 },\r\n        { name: \"tr-group\", maxcount: 1 },\r\n      ],\r\n    });\r\n  }\r\n};\r\n"}],"p-form":[{"type":"isChildrenOf","parent":"main-grid"},"isVerticalLayout",{"type":"checkSpacing","value":32},{"type":"checkPadding","value":[32]}],"p-grid":["isVerticalLayout",{"type":"checkSpacing","value":16}],"p-tab-view":[{"type":"isChildrenOf","parent":"p-card"},{"type":"checkSpacing","value":0},{"type":"containsChildren","names":[{"name":"p-tabview-panels","mincount":1},{"name":"p-tabview-nav","mincount":1}]},{"type":"expression","source":"module.exports = (node, rule, utils) => {\r\n  \r\n  const pivotStackHorizontal = utils.findNested(node, \"pivot-stack-horizontal\");\r\n  const pivotVerts = utils.findNested(node, \"pivot-vert\");\r\n  if (pivotStackHorizontal.length && !pivotVerts.length) {\r\n    utils.isVerticalLayout(node);\r\n  }\r\n  if (!pivotStackHorizontal.length && pivotVerts.length) {\r\n    utils.isHorizontalLayout(node);\r\n  }\r\n};\r\n"}],"p-tabview-nav":[{"type":"isChildrenOf","parent":"p-tab-view"},{"type":"checkSpacing","value":0},{"type":"expression","source":"module.exports = (node, rule, utils) => {\r\n  const { ErrorTypes } = utils;\r\n  \r\n  const pivotVerts = utils.findNested(node, \"pivot-vert\");\r\n  \r\n  if (pivotVerts.length) {\r\n    const activeVerts = pivotVerts.filter((item) => {\r\n      if (item.mainComponent) {\r\n        return (\r\n          utils.parseComponentProps(item.mainComponent.name).State === \"Active\"\r\n        );\r\n      }\r\n    });\r\n    if (activeVerts.length !== 1) {\r\n      utils.createErrorObject(\r\n        node,\r\n        ErrorTypes.STRUCTURE,\r\n        `Для узла <b>p-tabview-nav</b> должен быть указан один вложенный компонент <b>pivot-vert</b> с состоянием <b>State = \"Active\"</b>`\r\n      );\r\n    }\r\n  }\r\n  \r\n};\r\n"}],"p-tabview-panels":[{"type":"isChildrenOf","parent":"p-tab-view"},{"type":"checkSpacing","value":16},{"type":"checkPadding","value":[0,4,8,16,24,32,48]},"isVerticalLayout"],"pivot-stack-horizontal":["component",{"type":"isContainedBy","parent":"p-tabview-nav"},{"type":"expression","source":"module.exports = (node, rule, utils) => {\r\n  const { ErrorTypes } = utils;\r\n  const pivots = utils.findNested(node, \"pivot\");\r\n  if (pivots.length) {\r\n    const activeVerts = pivots.filter((item) => {\r\n      if (item.mainComponent) {\r\n        return (\r\n          utils.parseComponentProps(item.mainComponent.name).State === \"-Active\"\r\n        );\r\n      }\r\n    });\r\n    if (activeVerts.length !== 1) {\r\n      utils.createErrorObject(\r\n        node,\r\n        ErrorTypes.STRUCTURE,\r\n        `Для узла <b>pivot-stack-horizontal</b> должен быть указан один вложенный компонент <b>pivot</b> с состоянием <b>State = \"-Active\"</b>`\r\n      );\r\n    }\r\n  }\r\n};\r\n"}],"pivot-vert":["component",{"type":"isContainedBy","parent":"p-tabview-nav"}],"radio-button":["component"],"radio-group":["component"],"modal-header":["isHorizontalLayout"],"sidebar":["isVerticalLayout","excludeCommon",{"type":"isChildrenOf","parent":"main-grid"}],"split-button":["component"],"split-frame":["isHorizontalFrame",{"type":"checkPadding","value":[0]},{"type":"checkSpacing","value":0},{"type":"containsChildren","names":[{"name":"divider"},{"name":"split-item","mincount":2}]}],"split-item":["isVerticalLayout",{"type":"checkSpacing","value":[0,16]},{"type":"checkPadding","value":[0]},{"type":"isChildrenOf","parent":"split-frame"}],"status":["component"],"stepper":["component"],"table-filter-container":[{"type":"containsChildren","names":["filter"]},{"type":"checkPadding","top":[0,16],"bottom":[0,16],"left":[0,4,8,16,24,32],"right":[0,4,8,16,24,32]}],"table-td":["component",{"type":"isContainedBy","parent":"p-datatable-tbody"}],"table-th":["component",{"type":"isContainedBy","parent":"p-datatable-thead"}],"table":["isVerticalLayout",{"type":"containsChildren","names":[{"name":"p-datatable-tbody","mincount":1},{"name":"p-datatable-thead","maxcount":1}]},{"type":"isContainedBy","parent":["p-card","sidebar"]},{"type":"expression","source":"module.exports = (node, rule, utils) => {\r\n  const bodyList = node.children.filter(\r\n    (item) => utils.normalizeName(item.name) === \"p-datatable-tbody\"\r\n  );\r\n  const { ErrorTypes } = utils;\r\n  if (bodyList.length) {\r\n    const bodyHeight = bodyList[0].height;\r\n    const wrongHeight = bodyList.filter((item) => item.height !== bodyHeight);\r\n    if (wrongHeight.length) {\r\n      utils.createErrorObject(\r\n        node,\r\n        ErrorTypes.PADDING,\r\n        \"Все вложенные элементы <b>p-datatable-tbody</b> должны иметь одинаковую высоту\"\r\n      );\r\n    }\r\n  }\r\n};\r\n"}],"tabs-menu":["rootChildren",{"type":"expression","source":"module.exports = (node, utils) => {\r\n    return {transclude: false}\r\n}"},"excludeCommon","noCyrillycName"],"tr-group-expanded":[{"type":"isChildrenOf","parent":["p-datatable-thead","p-datatable-tbody"]}],"tr-group":[{"type":"isChildrenOf","parent":["p-datatable-thead","p-datatable-tbody"]},{"type":"containsChildren","names":[{"name":"tr","mincount":1}]},{"type":"expression","source":"module.exports = (node, rule, utils) => {\r\n  const container = utils.findParent(node, [\"grid\", \"table\"]);\r\n  if (container) {\r\n    const containerName = utils.normalizeName(container.name);\r\n    if (containerName === \"grid\") {\r\n    } else if (containerName === \"table\") {\r\n      utils.checkPadding(node, {\r\n        value: [0],\r\n        description:\r\n          \"Гризонтальные отступы необходимо задавать во вложенном узле <b>tr</b>\",\r\n      });\r\n    }\r\n  }\r\n};\r\n"},"isVerticalLayout"],"tr":["isHorizontalLayout",{"type":"expression","source":"module.exports = (node, rule, utils) => {\r\n  const container = utils.findParent(node, [\"grid\", \"table\"]);\r\n  const parentName = utils.normalizeName(node.parent.name);\r\n  if (container) {\r\n    const containerName = utils.normalizeName(container.name);\r\n    if (containerName === \"grid\") {\r\n      utils.isChildrenOf(node, {\r\n        type: \"isChildrenOf\",\r\n        parent: [\"tr-group\", \"tr-group-expanded\"],\r\n      });\r\n\r\n      if (parentName === \"p-datatable-thead\") {\r\n        utils.containsChildren(node, {\r\n          type: \"containsChildren\",\r\n          names: [\"grid-th\"],\r\n          nodeName: \"grid => p-datatable-thead => tr\",\r\n        });\r\n      }\r\n      if (parentName === \"p-datatable-tbody\") {\r\n        utils.containsChildren(node, {\r\n          type: \"containsChildren\",\r\n          names: [\"grid-td\"],\r\n          nodeName: \"grid > p-datatable-tbody > tr\",\r\n        });\r\n      }\r\n\r\n      utils.checkPadding(node, {\r\n        type: \"checkPadding\",\r\n        value: [0],\r\n        description:\r\n          \" Горизонтальные отступы необходимо задавать в родительском <b>tr-group</b>\",\r\n      });\r\n    } else if (containerName === \"table\") {\r\n      utils.isChildrenOf(node, {\r\n        type: \"isChildrenOf\",\r\n        parent: [\"p-datatable-thead\", \"p-datatable-tbody\", \"tr-group\"],\r\n      });\r\n\r\n      if (parentName === \"p-datatable-thead\") {\r\n        utils.containsChildren(node, {\r\n          type: \"containsChildren\",\r\n          names: [\"table-th\"],\r\n          nodeName: \"table > p-datatable-thead > tr\",\r\n        });\r\n      }\r\n      if (parentName === \"p-datatable-tbody\") {\r\n        utils.containsChildren(node, {\r\n          type: \"containsChildren\",\r\n          names: [\"table-td\"],\r\n          nodeName: \"table > p-datatable-tbody > tr\",\r\n        });\r\n      }\r\n    }\r\n  }\r\n};\r\n"},{"type":"checkSpacing","value":0}],"widget-counter":["component",{"type":"isChildrenOf","parent":"widgets"}],"widgets":["isHorizontalLayout",{"type":"containsChildren","names":["widget-counter"]}]}